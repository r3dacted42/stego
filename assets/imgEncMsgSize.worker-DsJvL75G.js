(function(){"use strict";self.onmessage=a=>{try{console.log("Worker received bitmap for size calculation");const{bitmap:e}=a.data,t=new OffscreenCanvas(e.width,e.height),s=t.getContext("2d");if(!s){self.postMessage({error:"Failed to get OffscreenCanvas context"});return}s.drawImage(e,0,0),e.close();const o=s.getImageData(0,0,t.width,t.height).data,n=Math.floor(o.length/4)*3,c={size:Math.floor(n/8)-4};self.postMessage(c)}catch(e){const t=e;self.postMessage({error:t.message})}}})();
